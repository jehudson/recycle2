

link(rel='stylesheet', href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css')



.form-style-5
  form(action='/new_post' method='POST' )
      fieldset
        legend
          span.number 1
          |  Make a New Post
        select#dropDown-message-type(name='messagetype')
          option(value='' disabled='disabled' selected='selected') What type of post is this?
          option(value='offer') It's an OFFER of an item
          option(value='wanted') It's a request for a WANTED item
        input(type='text', name='shortdescription', placeholder='Short description', required, autofocus)
        textarea(name='longdescription', placeholder='You can add more details here', required)
        #div1.drop-down-show-hide div 1
        #div2.drop-down-show-hide div 2
      input(type='hidden', name='image_url', id='image_url')
      input(type='submit', value='Make the Post')

      #offer.drop-down-show-hide
        p Add a picture - we can accept jpg, png or gif from several sources.
        button#upload_widget.cloudinary-button Upload files
        .feature-thumb
        script(src='https://widget.cloudinary.com/v2.0/global/all.js', type='text/javascript')

        script(type='text/javascript').
            var myWidget = cloudinary.createUploadWidget({
            cloudName: 'tlera',
            folder: 'tlera',
            maxImageWidth: '600',
            maxImageHeight: '600',
            thumbnails: '.feature-thumb',
            thumbnailTransformation: { width: 400, height: 400, crop: 'fit' },
            uploadPreset: 'x6uvzpz8'}, (error, result) => {
            if (!error && result && result.event === "success") {
            console.log('Done! Here is the image info: ', result.info);
            document.getElementById("image_url").value = result.info.secure_url;
            }
            }
            )
            document.getElementById("upload_widget").addEventListener("click", function(){
            myWidget.open();
            }, false);



        br
        p
